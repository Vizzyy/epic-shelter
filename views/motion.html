<!DOCTYPE html>
<html>
<%- include('headers.html'); -%>
<title>Motion</title>
<body>
<div class="mobile-container">
    <%- include('nav.html'); -%>
    <iframe name="dummyframe" style="width:0; height:0; border:none" ></iframe>
    <div id="myBody" class="flex-container-column">
        <h2>Motion</h2>
        <div class="flex-container-row">

        </div>
        <div id=image><img style="max-width:100%;max-height:100%;" src="data:image/gif;base64,<%- image %>" alt="Motion IMG"/></div>
        <div><br></div>
        <div class="flex-container-row">
            <input class="nav-bs" type="submit" value="Previous" onclick="backward()">
            <input class="nav-bs" type="submit" value="Next" onclick="forward()">
        </div>
    </div>
</div>
<script>
    let xhttp = new XMLHttpRequest();

    function forward() {
        let path = "/motion/next";
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("image").innerHTML = "<img style=\"max-width:100%;max-height:100%;\" src=\"data:image/gif;base64,"+this.responseText+"\">";
            }
        };
        xhttp.open("GET", path, true);
        xhttp.send();
    }

    function backward() {
        let path = "/motion/prev";
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("image").innerHTML = "<img style=\"max-width:100%;max-height:100%;\" src=\"data:image/gif;base64,"+this.responseText+"\">";
            }
        };
        xhttp.open("GET", path, true);
        xhttp.send();
    }
</script>
</body>
</html>